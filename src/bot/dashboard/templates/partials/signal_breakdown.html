{% if signal %}
<div class="bg-dash-card/50 rounded p-3 border border-dash-border/50">
  <h4 class="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">Signal Breakdown</h4>
  <div class="space-y-1.5">
    <!-- Composite Score -->
    <div class="flex items-center justify-between text-xs">
      <span class="text-gray-300">Composite</span>
      <span class="font-mono text-white">{{ "%.2f" | format(signal.composite_score | float) }}</span>
    </div>
    <!-- Sub-signal bars: rate_level, trend_score, persistence, basis_score -->
    {% for name, value, label in [
      ('rate_level', signal.rate_level, 'Rate Level'),
      ('trend_score', signal.trend_score, 'Trend'),
      ('persistence', signal.persistence, 'Persistence'),
      ('basis_score', signal.basis_score, 'Basis')
    ] %}
    <div class="flex items-center gap-2 text-xs">
      <span class="text-gray-400 w-20 shrink-0">{{ label }}</span>
      <div class="flex-1 h-2 bg-gray-700 rounded-full overflow-hidden">
        <div class="h-full bg-blue-500 rounded-full" style="width: {{ (value | float * 100) | int }}%"></div>
      </div>
      <span class="font-mono text-gray-300 w-8 text-right">{{ "%.2f" | format(value | float) }}</span>
    </div>
    {% endfor %}
    <!-- Volume filter -->
    <div class="flex items-center justify-between text-xs">
      <span class="text-gray-400">Volume</span>
      {% if signal.volume_ok %}
        <span class="text-green-400">Pass</span>
      {% else %}
        <span class="text-red-400">Fail</span>
      {% endif %}
    </div>
  </div>
</div>
{% else %}
<div class="bg-dash-card/50 rounded p-3 border border-dash-border/50">
  <p class="text-xs text-gray-500 italic">Signal data unavailable</p>
</div>
{% endif %}
